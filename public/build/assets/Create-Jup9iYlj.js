import{W as k,r as f,j as e,a as j}from"./app-DtigSzVn.js";import{D as v}from"./DefaultLayout-BuF4VAyk.js";import{i as y,h as N,o as w}from"./index-C6B-pshL.js";import{T as _}from"./TextEditor-92pu-1Qr.js";import"./index-CaKrDL1F.js";const E=()=>{const{data:a,setData:d,post:m,processing:n,errors:r}=k({title:"",slug:"",excerpt:"",content:"",featured_image:null,status:"draft",published_at:"",meta_data:{meta_title:"",meta_description:"",tags:""}}),[l,x]=f.useState(!1),i=(t,s=null)=>{t.preventDefault(),s&&d("status",s),m("/admin/news-events",{forceFormData:!0})},b=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),u=t=>{const s=t.target.value;d({...a,title:s,slug:b(s)})},p=t=>{const s=t.target.value,o={...a,status:s};if(s==="published"&&!a.published_at){const c=new Date,g=new Date(c.getTime()-c.getTimezoneOffset()*6e4).toISOString().slice(0,16);o.published_at=g}d(o)},h=t=>{const s=t.target.files[0];d("featured_image",s)};return e.jsx(v,{children:e.jsxs("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsxs("div",{className:"border-b border-stroke py-4 px-6.5 dark:border-strokedark flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{href:"/admin/news-events",children:e.jsx(y,{className:"text-gray-500 hover:text-gray-700 cursor-pointer"})}),e.jsx("h3",{className:"font-semibold text-black dark:text-white",children:"Tambah Postingan Baru"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{type:"button",onClick:()=>x(!l),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 flex items-center gap-2",children:[e.jsx(N,{size:14}),l?"Edit":"Preview"]})})]}),l?e.jsx("div",{className:"p-6.5",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-black dark:text-white mb-4",children:a.title||"Judul Postingan"}),a.excerpt&&e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-4",children:a.excerpt}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Status: ",e.jsx("span",{className:"font-medium",children:a.status}),a.published_at&&e.jsxs("span",{className:"ml-4",children:["Publish: ",new Date(a.published_at).toLocaleDateString("id-ID")]})]})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{className:"text-black dark:text-white leading-relaxed",dangerouslySetInnerHTML:{__html:a.content||"Konten postingan akan ditampilkan di sini..."}})})]})}):e.jsx("form",{onSubmit:i,children:e.jsx("div",{className:"p-6.5",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:["Judul Postingan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Masukkan judul postingan...",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:a.title,onChange:u}),r.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Slug URL"}),e.jsx("input",{type:"text",placeholder:"slug-url-berita",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:a.slug,onChange:t=>d("slug",t.target.value)}),r.slug&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Ringkasan"}),e.jsx("textarea",{rows:3,placeholder:"Ringkasan singkat postingan...",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:a.excerpt,onChange:t=>d("excerpt",t.target.value)}),r.excerpt&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.excerpt})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:["Konten ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(_,{value:a.content,onChange:t=>d("content",t),placeholder:"Tulis konten postingan di sini..."}),r.content&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.content}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gunakan toolbar di atas untuk formatting text, menambah gambar, link, dan lainnya."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-sm border border-stroke bg-white p-4 shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsx("h4",{className:"mb-4 text-xl font-semibold text-black dark:text-white",children:"Pengaturan Publish"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Status"}),e.jsxs("select",{className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:a.status,onChange:p,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Tanggal Publish"}),e.jsx("input",{type:"datetime-local",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:a.published_at,onChange:t=>d("published_at",t.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"submit",disabled:n,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 flex items-center gap-2 flex-1",children:[e.jsx(w,{size:14}),"Simpan Draft"]}),e.jsx("button",{type:"button",onClick:t=>i(t,"published"),disabled:n,className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90 flex items-center gap-2 flex-1",children:"Publish"})]})]})]}),e.jsxs("div",{className:"rounded-sm border border-stroke bg-white p-4 shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsx("h4",{className:"mb-4 text-xl font-semibold text-black dark:text-white",children:"Gambar Utama"}),e.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input"}),r.featured_image&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.featured_image})]})]})]})})})]})})};export{E as default};
