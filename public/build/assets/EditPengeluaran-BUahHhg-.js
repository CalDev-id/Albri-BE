import{q as k,j as e,W as v}from"./app-By9K5Lr_.js";import{D as j}from"./DefaultLayout-DS6OqK6Z.js";import"./index-pp0Yewt5.js";const F=()=>{const{laporanMitra:a}=k().props;if(!a)return e.jsx("div",{children:"Loading..."});const d=[];a.mitras&&a.mitras.length>0?a.mitras.forEach(r=>{d.push({mitra_id:r.mitra_nama||"",gaji:r.gaji||0})}):d.push({mitra_id:"",gaji:0});const{data:t,setData:s,put:m,errors:w}=v({hari:(a==null?void 0:a.hari)||"",tanggal:(a==null?void 0:a.tanggal)||"",mitras:d.length>0?d:[{mitra_id:"",gaji:0}],atk:(a==null?void 0:a.atk)||0,intensif:(a==null?void 0:a.intensif)||0,lainlain:(a==null?void 0:a.lainlain)||0,lisensi:(a==null?void 0:a.lisensi)||0});console.log("Form data:",t),console.log("Form data.mitras:",t.mitras);const b=()=>{const r=t.mitras||[];s("mitras",[...r,{mitra_id:"",gaji:0}])},u=(r,l,i)=>{const c=[...t.mitras||[]];c[r]&&(c[r][l]=i,s("mitras",c))},x=r=>{const i=(t.mitras||[]).filter((c,g)=>g!==r);s("mitras",i)},p=r=>{r.preventDefault(),m(`/admin/laporan/pengeluaranmitra/${a.id}`)},o=r=>{r.target.value==="0"&&(r.target.value="")},n=(r,l)=>{(r.target.value===""||r.target.value===null||r.target.value===void 0)&&s(l,0)},h=r=>{r.target.value==="0"&&(r.target.value="")},f=(r,l)=>{(r.target.value===""||r.target.value===null||r.target.value===void 0)&&u(l,"gaji",0)};return e.jsx(j,{children:e.jsx("div",{className:"flex flex-col gap-9",children:e.jsxs("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsx("div",{className:"border-b border-stroke px-6.5 py-4 dark:border-strokedark",children:e.jsx("h3",{className:"font-medium text-black dark:text-white",children:"Laporan Pengeluaran Mitra"})}),e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"p-6.5",children:[e.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Hari"}),e.jsxs("select",{className:"select select-bordered w-full",value:t.hari,onChange:r=>s("hari",r.target.value),children:[e.jsx("option",{disabled:!0,value:"",children:"Pilih Hari"}),e.jsx("option",{value:"Senin",children:"Senin"}),e.jsx("option",{value:"Selasa",children:"Selasa"}),e.jsx("option",{value:"Rabu",children:"Rabu"}),e.jsx("option",{value:"Kamis",children:"Kamis"}),e.jsx("option",{value:"Jumat",children:"Jumat"}),e.jsx("option",{value:"Sabtu",children:"Sabtu"}),e.jsx("option",{value:"Minggu",children:"Minggu"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Tanggal"}),e.jsx("input",{type:"date",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:t.tanggal,onChange:r=>s("tanggal",r.target.value),placeholder:"Select date"})]})]}),e.jsxs("div",{className:"form-control mb-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nama Guru & Gaji"})}),console.log("About to render mitras, data.mitras:",t.mitras),t&&t.mitras&&Array.isArray(t.mitras)&&t.mitras.length>0?t.mitras.map((r,l)=>e.jsxs("div",{className:"mb-3 flex flex-col gap-4 xl:flex-row",children:[e.jsx("div",{className:"w-full xl:w-1/2",children:e.jsx("input",{type:"text",value:(r==null?void 0:r.mitra_id)||"",onChange:i=>u(l,"mitra_id",i.target.value),className:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary",placeholder:"Nama Mitra"})}),e.jsx("div",{className:"w-full xl:w-1/2",children:e.jsx("input",{type:"number",value:(r==null?void 0:r.gaji)||"",onChange:i=>u(l,"gaji",i.target.value),onFocus:h,onBlur:i=>f(i,l),className:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary",placeholder:"Gaji"})}),t.mitras.length>1&&e.jsx("div",{className:"xl:w-auto",children:e.jsx("button",{type:"button",onClick:()=>x(l),className:"rounded bg-red-600 px-4 py-3 text-white hover:bg-opacity-90",title:"Hapus Guru",children:"âœ•"})})]},l)):e.jsx("div",{children:"No mitras data available"})]}),e.jsx("button",{type:"button",onClick:b,className:"mb-4 rounded bg-blue-600 px-6 py-2 text-white hover:bg-opacity-90",children:"+ Tambah Guru"}),e.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[e.jsx("div",{className:"w-full xl:w-1/2",children:e.jsxs("div",{className:"mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"ATK"}),e.jsx("input",{type:"number",value:t.atk,onChange:r=>s("atk",r.target.value),onFocus:o,onBlur:r=>n(r,"atk"),placeholder:"",className:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"})]})}),e.jsx("div",{className:"w-full xl:w-1/2",children:e.jsxs("div",{className:"mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Intensif"}),e.jsx("input",{type:"number",value:t.intensif,onChange:r=>s("intensif",r.target.value),onFocus:o,onBlur:r=>n(r,"intensif"),placeholder:"",className:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"})]})})]}),e.jsx("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row"}),e.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[e.jsx("div",{className:"w-full xl:w-1/2",children:e.jsxs("div",{className:"mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Lain Lain"}),e.jsx("input",{type:"number",value:t.lainlain,onChange:r=>s("lainlain",r.target.value),onFocus:o,onBlur:r=>n(r,"lainlain"),placeholder:"",className:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"})]})}),e.jsx("div",{className:"w-full xl:w-1/2",children:e.jsxs("div",{className:"mb-4.5",children:[e.jsx("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:"Lisensi"}),e.jsx("input",{type:"number",value:t.lisensi,onChange:r=>s("lisensi",r.target.value),onFocus:o,onBlur:r=>n(r,"lisensi"),placeholder:"",className:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"})]})})]}),e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray hover:bg-opacity-90",children:"Submit"})]})})]})})})};export{F as default};
