import{r as b,j as e,Y as $,a as E,y as k}from"./app-D3WCyhkI.js";import{D as S}from"./DefaultLayout-Bw__pnZL.js";import{b as z,c as L,d as P,e as G,f as T,g as B,h as I}from"./index-DIr3b4C8.js";import"./index-D1csOlho.js";const q=({gurus:a,monthlyData:n,teacherTotals:g,currentMonth:x,currentYear:m,monthName:j,prevMonth:d,nextMonth:l,availableMonths:R,filters:p})=>{b.useState(p.search||"");const[y,u]=b.useState({}),f=(r,s)=>{const t=`${r}-${s}`;u(o=>({...o,[t]:!o[t]}))},N=()=>{d&&k.get("/gaji/guru",{month:d.month,year:d.year})},w=()=>{l&&k.get("/gaji/guru",{month:l.month,year:l.year})},v=()=>{window.location.href=`/gaji/guru/export-excel?month=${x}&year=${m}`},F=()=>{window.location.href=`/gaji/guru/export-pdf?month=${x}&year=${m}`},i=r=>!r||r===0?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),C=(r,s)=>{const t=r.teachers[s.id]||{details:[],total:0},o=`${r.full_date}-${s.id}`,h=y[o];return t.total===0?e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"-"}):e.jsxs("div",{className:"space-y-1 border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-center font-medium text-black dark:text-white",children:i(t.total)}),t.details&&t.details.length>0&&e.jsx("button",{onClick:()=>f(r.full_date,s.id),className:"ml-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:h?e.jsx(B,{size:12}):e.jsx(I,{size:12})})]}),h&&t.details&&t.details.length>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-xs space-y-1",children:[t.details.map((c,D)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[c.nama," ",e.jsxs("span",{className:"text-gray-400",children:["(",c.source,")"]})]}),e.jsx("span",{className:"font-medium text-center text-black dark:text-white",children:i(c.gaji)})]},D)),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-1 mt-1",children:e.jsxs("div",{className:"flex justify-between items-center font-medium",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"Total:"}),e.jsx("span",{className:"text-center text-black dark:text-white",children:i(t.total)})]})})]})]})};return e.jsxs(S,{children:[e.jsx($,{title:"Laporan Penggajian Guru"}),e.jsxs("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsx("div",{className:"border-b border-stroke py-4 px-6.5 dark:border-strokedark",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-black dark:text-white text-xl",children:"Laporan Penggajian Guru"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:j})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:N,disabled:!d,className:`px-3 py-2 rounded-lg flex items-center gap-2 font-medium transition-colors ${d?"bg-gray-500 hover:bg-gray-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(z,{size:14}),"Bulan Sebelumnya"]}),e.jsxs("button",{onClick:w,disabled:!l,className:`px-3 py-2 rounded-lg flex items-center gap-2 font-medium transition-colors ${l?"bg-gray-500 hover:bg-gray-600 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Bulan Berikutnya",e.jsx(L,{size:14})]})]}),e.jsxs(E,{href:"/gaji/guru/monthly",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-medium transition-colors",children:[e.jsx(P,{size:16}),"Laporan Bulanan"]}),e.jsxs("button",{onClick:v,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-medium transition-colors",children:[e.jsx(G,{size:16}),"Excel"]}),e.jsxs("button",{onClick:F,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-medium transition-colors",children:[e.jsx(T,{size:16}),"PDF"]})]})]})}),e.jsx("div",{className:"p-6.5",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e.jsx("th",{className:"border border-stroke py-4 px-4 font-medium text-black dark:border-strokedark dark:text-white",children:"Tanggal"}),e.jsx("th",{className:"border border-stroke py-4 px-4 font-medium text-black dark:border-strokedark dark:text-white",children:"Hari"}),a&&a.map(r=>e.jsx("th",{className:"border border-stroke py-4 px-4 font-medium text-black dark:border-strokedark dark:text-white text-center",children:r.name},r.id))]})}),e.jsx("tbody",{children:n&&n.length>0?e.jsxs(e.Fragment,{children:[n.map((r,s)=>e.jsxs("tr",{className:"hover:bg-gray-1 dark:hover:bg-meta-4",children:[e.jsx("td",{className:"border border-stroke py-5 px-4 dark:border-strokedark",children:e.jsx("div",{className:"font-medium text-black dark:text-white",children:r.date})}),e.jsx("td",{className:"border border-stroke py-5 px-4 dark:border-strokedark",children:e.jsx("div",{className:"text-black dark:text-white",children:r.day})}),a&&a.map(t=>e.jsx("td",{className:"border border-stroke py-5 px-4 text-center dark:border-strokedark",children:C(r,t)},t.id))]},s)),e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700 font-bold",children:[e.jsx("td",{colSpan:"2",className:"border border-stroke py-5 px-4 dark:border-strokedark text-black dark:text-white text-lg",children:"TOTAL"}),a&&a.map(r=>e.jsx("td",{className:"border border-stroke py-5 px-4 text-center dark:border-strokedark text-primary dark:text-blue-400 text-lg",children:i(g[r.id]||0)},r.id))]})]}):e.jsx("tr",{children:e.jsx("td",{colSpan:a?a.length+2:3,className:"border border-stroke py-5 px-4 text-center dark:border-strokedark",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Tidak ada data gaji guru untuk bulan ini"})})})})]})})})]})]})};export{q as default};
