import{q as g,j as t,a as o}from"./app-CjOG9aAE.js";import{F as w,a as L}from"./index-D-Tugu_n.js";import{d as T}from"./index-BCBCUD0G.js";import{u as m,w as S}from"./xlsx-DjuO7_Ju.js";const _=()=>{const{laporanPengeluaranPrivate:c,startOfWeek:u,endOfWeek:b,nextWeekOffset:k,prevWeekOffset:p}=g().props,h=e=>{T.Inertia.get(route("Private.index"),{weekOffset:e})},l=e=>c.data.reduce((r,s)=>r+(Number(s[e])||0),0),N=()=>c.data.reduce((e,r)=>{const s=r.gurus||[];if(Array.isArray(s)){const x=s.reduce((d,n)=>d+(Number(n.gaji)||0),0);return e+x}return e+(Number(r.gaji)||0)},0),j=e=>{const r=e.gurus||[];return Array.isArray(r)?r.reduce((s,x)=>s+(Number(x.gaji)||0),0):Number(e.gaji)||0},y=e=>{const r=e.gurus||[];return Array.isArray(r)&&r.length>0?r.map(s=>s.guru_id).join(", "):e.user?e.user.name:"N/A"},f=()=>{const e=c.data.map(a=>({Hari:a.hari,Tanggal:a.tanggal,Pembuat:a.user?a.user.name:"N/A","Nama Guru":y(a),Gaji:j(a),ATK:Number(a.atk)||0,Sewa:Number(a.sewa)||0,Intensif:Number(a.intensif)||0,Lisensi:Number(a.lisensi)||0,THR:Number(a.thr)||0,"Lain Lain":Number(a.lainlain)||0,Total:Number(a.totalpengeluaran)||0})),r={Hari:"Total",Tanggal:"",Pembuat:"","Nama Guru":"",Gaji:e.reduce((a,i)=>a+Number(i.Gaji),0),ATK:e.reduce((a,i)=>a+Number(i.ATK),0),Sewa:e.reduce((a,i)=>a+Number(i.Sewa),0),Intensif:e.reduce((a,i)=>a+Number(i.Intensif),0),Lisensi:e.reduce((a,i)=>a+Number(i.Lisensi),0),THR:e.reduce((a,i)=>a+Number(i.THR),0),"Lain Lain":e.reduce((a,i)=>a+Number(i["Lain Lain"]),0),Total:e.reduce((a,i)=>a+Number(i.Total),0)};e.push(r);const s=["Hari","Tanggal","Pembuat","Nama Guru","Gaji","ATK","Sewa","Intensif","Lisensi","THR","Lain Lain","Total"],x=m.json_to_sheet(e,{header:s});m.sheet_add_aoa(x,[s],{origin:"A1"});const d=m.book_new();m.book_append_sheet(d,x,"Pengeluaran Private");const n=`Laporan_Pengeluaran_Private_${u}_to_${b}.xlsx`;S(d,n)};return t.jsxs("div",{className:"col-span-12 rounded-sm border border-stroke bg-white py-6 shadow-default dark:border-strokedark dark:bg-boxdark mt-20",children:[t.jsxs("div",{className:"flex justify-between px-7.5 mb-6",children:[t.jsx("h4",{className:"text-xl font-semibold text-black dark:text-white",children:"Laporan Pengeluaran Private"}),t.jsxs("div",{children:[t.jsx(o,{href:"/admin/laporan/pengeluaranprivate/create",children:t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90",children:"Tambah Pengeluaran"})}),t.jsx("button",{onClick:()=>f(),className:"bg-green-500 text-white px-4 py-2 rounded ml-2 hover:bg-green-600",children:"Download Excel"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-2 dark:bg-meta-4",children:[t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Hari"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Tanggal"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Nama Guru"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Gaji"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"ATK"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Sewa"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Intensif"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Lisensi"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"THR"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Lain Lain"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Total"}),t.jsx("th",{className:"py-4 px-4 text-center text-sm font-medium text-black dark:text-white",children:"Actions"})]})}),t.jsx("tbody",{children:c.data.map((e,r)=>t.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark",children:[t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white pl-10",children:e.hari}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:e.tanggal}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:e.user?e.user.name:"N/A"}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:e.gurus&&Array.isArray(e.gurus)&&e.gurus.length>0?e.gurus.map((s,x)=>t.jsxs("div",{children:[s.guru_id," - Rp ",Number(s.gaji).toLocaleString()]},x)):`Rp ${Number(e.gaji||0).toLocaleString()}`}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.atk).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.sewa||0).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.intensif).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.lisensi).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.thr||0).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.lainlain).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.totalpengeluaran).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-center",children:t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx(o,{href:`/admin/laporan/pengeluaranprivate/${e.id}/edit`,children:t.jsx(w,{className:"text-yellow-500 hover:text-yellow-700 cursor-pointer"})}),t.jsx(o,{href:`/admin/laporan/pengeluaranprivate/${e.id}`,method:"delete",as:"button",data:{id:e.id},onClick:s=>{confirm("Are you sure you want to delete this item?")||s.preventDefault()},children:t.jsx(L,{className:"text-red-500 hover:text-red-700 cursor-pointer"})})]})})]},r))}),t.jsx("tfoot",{children:t.jsxs("tr",{className:"bg-gray-2 dark:bg-meta-4 font-semibold",children:[t.jsx("td",{colSpan:"3",className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Total"}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:N().toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:l("atk").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:l("sewa").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:l("intensif").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:l("lisensi").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:l("thr").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:l("lainlain").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:l("totalpengeluaran").toLocaleString()}),t.jsx("td",{className:"py-4 px-4"})]})})]})}),t.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[t.jsx("button",{onClick:()=>h(p),className:"py-2 px-4 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Sebelumnya"}),t.jsx("button",{onClick:()=>h(k),className:"py-2 px-4 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Selanjutnya"})]})]})};export{_ as default};
