import{j as t,a as u}from"./app-DkQQNQ4T.js";import{u as b,w as A}from"./xlsx-DjuO7_Ju.js";import"./flowbite.min-Dyi2Wf9s.js";import{F as C,a as E}from"./index-CNG7MX43.js";import{d as B}from"./index-BhwYw7oT.js";const R=({laporanPrivate:i,startOfWeek:k,endOfWeek:g,nextWeekOffset:j,prevWeekOffset:w,goToWeek:N,paketPrivate:r,selectedIds:d=[],setSelectedIds:h=()=>{}})=>{const L=e=>{if(e.target.checked){const x=i.data.map(l=>l.id);h(x)}else h([])},S=e=>{d.includes(e)?h(d.filter(x=>x!==e)):h([...d,e])},T=()=>{if(d.length===0){alert("Pilih item yang akan dihapus");return}confirm(`Apakah Anda yakin ingin menghapus ${d.length} item?`)&&B.Inertia.post(route("admin.laporan.private.bulk-delete"),{ids:d},{onSuccess:()=>{h([])}})},n=e=>i.data.reduce((x,l)=>x+(Number(l[e])||0),0),_=e=>i.data.reduce((x,l)=>{const c=l.pakets&&l.pakets[e]?Number(l.pakets[e]):0;return x+c},0),$=(e,x)=>{const l=e.data.map(a=>{const s={Hari:a.hari,Tanggal:a.tanggal};return r&&r.length>0&&r.forEach(o=>{const p=`${o.nama_paket} (${o.harga.toLocaleString()})`,D=a.pakets&&a.pakets[o.id]?a.pakets[o.id]:0;s[p]=D}),s["Total Biaya"]=Number(a.totalbiaya)||0,s.Daftar=Number(a.daftar)||0,s.Modul=Number(a.modul)||0,s.Kaos=Number(a.kaos)||0,s.Kas=Number(a.kas)||0,s["Lain Lain"]=Number(a.lainlain)||0,s["Total Pemasukan"]=Number(a.totalpemasukan)||0,s}),c={Hari:"Total",Tanggal:""};r&&r.length>0&&r.forEach(a=>{const s=`${a.nama_paket} (${a.harga.toLocaleString()})`;c[s]=l.reduce((o,p)=>o+Number(p[s]),0)}),c["Total Biaya"]=l.reduce((a,s)=>a+Number(s["Total Biaya"]),0),c.Daftar=l.reduce((a,s)=>a+Number(s.Daftar),0),c.Modul=l.reduce((a,s)=>a+Number(s.Modul),0),c.Kaos=l.reduce((a,s)=>a+Number(s.Kaos),0),c.Kas=l.reduce((a,s)=>a+Number(s.Kas),0),c["Lain Lain"]=l.reduce((a,s)=>a+Number(s["Lain Lain"]),0),c["Total Pemasukan"]=l.reduce((a,s)=>a+Number(s["Total Pemasukan"]),0),l.push(c);const m=["Hari","Tanggal"];r&&r.length>0&&r.forEach(a=>{m.push(`${a.nama_paket} (${a.harga.toLocaleString()})`)}),m.push("Total Biaya","Daftar","Modul","Kaos","Kas","Lain Lain","Total Pemasukan");const y=b.json_to_sheet(l,{header:m});b.sheet_add_aoa(y,[m],{origin:"A1"});const f=b.book_new();b.book_append_sheet(f,y,"Laporan");const K=`Laporan_Pemasukan_private_${x}.xlsx`;A(f,K)};return t.jsx("div",{children:t.jsxs("div",{className:"col-span-12 rounded-sm border border-stroke bg-white py-6 shadow-default dark:border-strokedark dark:bg-boxdark",children:[t.jsxs("div",{className:"flex justify-between px-7.5 mb-6",children:[t.jsxs("h4",{className:"text-xl font-semibold text-black dark:text-white",children:["Laporan Pemasukan Private ( ",k," sampai"," ",g," )"]}),t.jsxs("div",{children:[t.jsx(u,{href:"/admin/laporan/private/create",children:t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90",children:"Tambah Laporan"})}),t.jsx("button",{onClick:()=>$(i,`${k} sampai ${g}`),className:"bg-green-500 text-white px-4 py-2 rounded ml-2 hover:bg-green-600",children:"Download Excel"}),d.length>0&&t.jsxs("button",{onClick:T,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 ml-2",children:["Hapus Terpilih (",d.length,")"]}),t.jsx(u,{href:"/admin/laporan/private/paket/",children:t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90 ml-2 ",children:"Setting Harga"})})]})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-2 dark:bg-meta-4",children:[t.jsx("th",{className:"py-4 px-4 text-center",children:t.jsx("input",{type:"checkbox",onChange:L,checked:i.data.length>0&&d.length===i.data.length,className:"w-4 h-4"})}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Hari"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Tanggal"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Nama"}),r&&r.length>0&&r.map((e,x)=>t.jsxs("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:[e.nama_paket," (",e.harga.toLocaleString(),")"]},x)),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Total Biaya"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Daftar"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Modul"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Kaos"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Kas"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Lain Lain"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Total"}),t.jsx("th",{className:"py-4 px-4 text-center text-sm font-medium text-black dark:text-white",children:"Actions"})]})}),t.jsx("tbody",{children:i.data.map((e,x)=>t.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark",children:[t.jsx("td",{className:"py-4 px-4 text-center",children:t.jsx("input",{type:"checkbox",checked:d.includes(e.id),onChange:()=>S(e.id),className:"w-4 h-4"})}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white pl-10",children:e.hari}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:e.tanggal}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white pl-10",children:e.user?e.user.name:"N/A"}),r&&r.length>0&&r.map((l,c)=>{const m=e.pakets&&e.pakets[l.id]?Number(e.pakets[l.id]):0;return t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:m.toLocaleString()},c)}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.totalbiaya).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.daftar).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.modul).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.kaos).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.kas).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.lainlain).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(e.totalpemasukan).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-center",children:t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx(u,{href:`/admin/laporan/private/${e.id}/edit`,children:t.jsx(C,{className:"text-yellow-500 hover:text-yellow-700 cursor-pointer"})}),t.jsx(u,{href:`/admin/laporan/private/${e.id}`,method:"delete",as:"button",data:{id:e.id},onClick:l=>{confirm("Are you sure you want to delete this item?")||l.preventDefault()},children:t.jsx(E,{className:"text-red-500 hover:text-red-700 cursor-pointer"})})]})})]},x))}),t.jsx("tfoot",{children:t.jsxs("tr",{className:"bg-gray-2 dark:bg-meta-4 font-semibold",children:[t.jsx("td",{className:"py-4 px-4 text-center"}),t.jsx("td",{colSpan:"3",className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Total"}),r&&r.length>0&&r.map((e,x)=>t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:_(e.id).toLocaleString()},x)),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:n("totalbiaya").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:n("daftar").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:n("modul").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:n("kaos").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:n("kas").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:n("lainlain").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:n("totalpemasukan").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-center text-sm font-medium text-black dark:text-white"})]})})]}),t.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[t.jsx("button",{onClick:()=>N(w),className:"py-2 px-4 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Sebelumnya"}),t.jsx("button",{onClick:()=>N(j),className:"py-2 px-4 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Selanjutnya"})]})]})]})})};export{R as default};
