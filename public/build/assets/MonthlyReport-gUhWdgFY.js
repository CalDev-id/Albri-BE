import{r as d,j as e,Y as y,a as w,y as v}from"./app-BwK3AApH.js";import{D as F}from"./DefaultLayout-CBQaxZIM.js";import{i as P,e as o,f as c,d as C,j as E,k as $,l as T}from"./index-mn58H4xD.js";import"./index-D6b0ya7t.js";const G=({monthlySummary:x,year:m,filters:Y})=>{const[s,h]=d.useState(m||2025),[i,p]=d.useState({}),g=()=>{v.get("/gaji/guru/monthly",{year:s},{preserveState:!0})},b=()=>{window.location.href=`/gaji/guru/monthly/export/excel?year=${s}`},u=()=>{window.location.href=`/gaji/guru/monthly/export/pdf?year=${s}`},l=t=>!t||t===0?"-":new Intl.NumberFormat("id-ID").format(t),j=t=>new Date(t).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),k=t=>{p(r=>({...r,[t]:!r[t]}))},f=()=>{const t=new Date().getFullYear(),r=[];for(let a=t-5;a<=t+1;a++)r.push(a);return r};return e.jsxs(F,{children:[e.jsx(y,{title:"Laporan Penggajian Guru - Per Bulan"}),e.jsxs("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsx("div",{className:"border-b border-stroke py-4 px-6.5 dark:border-strokedark",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(w,{href:"/gaji/guru",className:"inline-flex items-center gap-2 text-primary hover:text-primary/80",children:[e.jsx(P,{className:"text-sm"}),e.jsx("span",{children:"Kembali"})]}),e.jsxs("h3",{className:"font-semibold text-black dark:text-white text-xl",children:["Laporan Penggajian Guru - Per Bulan (",s,")"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 rounded bg-success py-2 px-4 text-white hover:bg-opacity-90 transition duration-300",children:[e.jsx(o,{className:"text-lg"}),"Download Excel"]}),e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-2 rounded bg-danger py-2 px-4 text-white hover:bg-opacity-90 transition duration-300",children:[e.jsx(c,{className:"text-lg"}),"Download PDF"]})]})]})}),e.jsx("div",{className:"border-b border-stroke py-4 px-6.5 dark:border-strokedark",children:e.jsx("div",{className:"flex flex-col lg:flex-row gap-4",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center",children:[e.jsx("label",{className:"text-sm font-medium text-black dark:text-white whitespace-nowrap",children:"Pilih Tahun:"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("select",{value:s,onChange:t=>h(t.target.value),className:"rounded border border-stroke py-1.5 px-3 text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white",children:f().map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsxs("button",{onClick:g,className:"inline-flex items-center gap-1 rounded bg-primary py-1.5 px-3 text-white hover:bg-opacity-90 transition duration-300",children:[e.jsx(C,{className:"text-sm"}),"Terapkan"]})]})]})})})}),e.jsx("div",{className:"p-6.5",children:e.jsx("div",{className:"space-y-6",children:Object.values(x).map(t=>{const r=Object.keys(t.totals).filter(a=>a!=="total");return e.jsxs("div",{className:"border border-stroke rounded-lg dark:border-strokedark",children:[e.jsx("div",{className:"bg-gray-2 dark:bg-meta-4 p-4 cursor-pointer",onClick:()=>k(t.month),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-semibold text-black dark:text-white text-lg",children:[t.month_name," ",s]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-black dark:text-white",children:["Total: ",e.jsx("span",{className:"font-semibold",children:l(t.totals.total)})]}),e.jsxs("button",{onClick:a=>{a.stopPropagation(),window.location.href=`/gaji/guru/monthly/export/excel?year=${s}&month=${t.month}`},className:"inline-flex items-center gap-2 rounded bg-success py-1 px-3 text-white hover:bg-opacity-90 transition duration-300 text-xs",children:[e.jsx(o,{className:"text-base"}),"Excel Bulan Ini"]}),e.jsxs("button",{onClick:a=>{a.stopPropagation(),window.location.href=`/gaji/guru/monthly/export/pdf?year=${s}&month=${t.month}`},className:"inline-flex items-center gap-2 rounded bg-danger py-1 px-3 text-white hover:bg-opacity-90 transition duration-300 text-xs",children:[e.jsx(c,{className:"text-base"}),"PDF Bulan Ini"]}),e.jsxs("button",{onClick:a=>{a.stopPropagation(),window.open(`/gaji/guru/monthly/print/pdf?year=${s}&month=${t.month}`,"_blank")},className:"inline-flex items-center gap-2 rounded bg-warning py-1 px-3 text-white hover:bg-opacity-90 transition duration-300 text-xs",children:[e.jsx(E,{className:"text-base"}),"Print PDF"]}),i[t.month]?e.jsx($,{className:"text-primary"}):e.jsx(T,{className:"text-primary"})]})]})}),i[t.month]&&e.jsx("div",{className:"p-4",children:t.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto mb-4",children:e.jsxs("table",{className:"w-full table-auto text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-left dark:bg-meta-4",children:[e.jsx("th",{className:"py-2 px-2 font-medium text-black dark:text-white",children:"Hari"}),e.jsx("th",{className:"py-2 px-2 font-medium text-black dark:text-white",children:"Tanggal"}),r.map(a=>e.jsx("th",{className:"py-2 px-2 font-medium text-black dark:text-white",children:a},a)),e.jsx("th",{className:"py-2 px-2 font-medium text-black dark:text-white",children:"Total"})]})}),e.jsx("tbody",{children:t.data.map((a,N)=>e.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark hover:bg-gray-50 dark:hover:bg-meta-4",children:[e.jsx("td",{className:"py-2 px-2 text-black dark:text-white",children:a.hari}),e.jsx("td",{className:"py-2 px-2 text-black dark:text-white",children:a.tanggal&&!isNaN(new Date(a.tanggal))?j(a.tanggal):"-"}),r.map(n=>e.jsx("td",{className:"py-2 px-2 text-black dark:text-white text-right",children:l(t.totals[n])},n)),e.jsx("td",{className:"py-2 px-2 text-black dark:text-white text-right font-semibold",children:l(a.total)})]},N))})]})}),e.jsxs("div",{className:"bg-primary/5 p-4 rounded border border-primary/20",children:[e.jsxs("h5",{className:"font-semibold text-black dark:text-white mb-3",children:["Ringkasan ",t.month_name," ",s]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 text-sm",children:r.map(a=>e.jsxs("div",{className:"bg-white dark:bg-meta-4 p-2 rounded",children:[e.jsx("div",{className:"text-black dark:text-white font-medium",children:a}),e.jsx("div",{className:"text-primary font-semibold",children:l(t.totals[a])})]},a))}),e.jsx("div",{className:"mt-3 pt-3 border-t border-primary/20",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold text-black dark:text-white",children:"Total Bulan:"}),e.jsx("span",{className:"font-bold text-primary text-lg",children:l(t.totals.total)})]})})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-black dark:text-white",children:["Tidak ada data untuk bulan ",t.month_name]})})})]},t.month)})})})]})]})};export{G as default};
