import{j as t,a as o}from"./app-D3WCyhkI.js";import{u as h,w as T}from"./xlsx-DjuO7_Ju.js";import"./flowbite.min-Dyi2Wf9s.js";import{F as _,a as $}from"./index-DIr3b4C8.js";import"./index-D1csOlho.js";const M=({laporanPrivate:n,startOfWeek:b,endOfWeek:k,nextWeekOffset:y,prevWeekOffset:f,goToWeek:p,paketPrivate:r})=>{const c=a=>n.data.reduce((d,l)=>d+(Number(l[a])||0),0),j=a=>n.data.reduce((d,l)=>{const x=l.pakets&&l.pakets[a]?Number(l.pakets[a]):0;return d+x},0),w=(a,d)=>{const l=a.data.map(e=>{const s={Hari:e.hari,Tanggal:e.tanggal};return r&&r.length>0&&r.forEach(m=>{const u=`${m.nama_paket} (${m.harga.toLocaleString()})`,S=e.pakets&&e.pakets[m.id]?e.pakets[m.id]:0;s[u]=S}),s["Total Biaya"]=Number(e.totalbiaya)||0,s.Daftar=Number(e.daftar)||0,s.Modul=Number(e.modul)||0,s.Kaos=Number(e.kaos)||0,s.Kas=Number(e.kas)||0,s["Lain Lain"]=Number(e.lainlain)||0,s["Total Pemasukan"]=Number(e.totalpemasukan)||0,s}),x={Hari:"Total",Tanggal:""};r&&r.length>0&&r.forEach(e=>{const s=`${e.nama_paket} (${e.harga.toLocaleString()})`;x[s]=l.reduce((m,u)=>m+Number(u[s]),0)}),x["Total Biaya"]=l.reduce((e,s)=>e+Number(s["Total Biaya"]),0),x.Daftar=l.reduce((e,s)=>e+Number(s.Daftar),0),x.Modul=l.reduce((e,s)=>e+Number(s.Modul),0),x.Kaos=l.reduce((e,s)=>e+Number(s.Kaos),0),x.Kas=l.reduce((e,s)=>e+Number(s.Kas),0),x["Lain Lain"]=l.reduce((e,s)=>e+Number(s["Lain Lain"]),0),x["Total Pemasukan"]=l.reduce((e,s)=>e+Number(s["Total Pemasukan"]),0),l.push(x);const i=["Hari","Tanggal"];r&&r.length>0&&r.forEach(e=>{i.push(`${e.nama_paket} (${e.harga.toLocaleString()})`)}),i.push("Total Biaya","Daftar","Modul","Kaos","Kas","Lain Lain","Total Pemasukan");const N=h.json_to_sheet(l,{header:i});h.sheet_add_aoa(N,[i],{origin:"A1"});const g=h.book_new();h.book_append_sheet(g,N,"Laporan");const L=`Laporan_Pemasukan_private_${d}.xlsx`;T(g,L)};return t.jsx("div",{children:t.jsxs("div",{className:"col-span-12 rounded-sm border border-stroke bg-white py-6 shadow-default dark:border-strokedark dark:bg-boxdark",children:[t.jsxs("div",{className:"flex justify-between px-7.5 mb-6",children:[t.jsxs("h4",{className:"text-xl font-semibold text-black dark:text-white",children:["Laporan Pemasukan Private ( ",b," sampai"," ",k," )"]}),t.jsxs("div",{children:[t.jsx(o,{href:"/admin/laporan/private/create",children:t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90",children:"Tambah Laporan"})}),t.jsx("button",{onClick:()=>w(n,`${b} sampai ${k}`),className:"bg-green-500 text-white px-4 py-2 rounded ml-2 hover:bg-green-600",children:"Download Excel"}),t.jsx(o,{href:"/admin/laporan/private/paket/",children:t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90 ml-2 ",children:"Setting Harga"})})]})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-2 dark:bg-meta-4",children:[t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Hari"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Tanggal"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Nama"}),r&&r.length>0&&r.map((a,d)=>t.jsxs("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:[a.nama_paket," (",a.harga.toLocaleString(),")"]},d)),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Total Biaya"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Daftar"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Modul"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Kaos"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Kas"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Lain Lain"}),t.jsx("th",{className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white",children:"Total"}),t.jsx("th",{className:"py-4 px-4 text-center text-sm font-medium text-black dark:text-white",children:"Actions"})]})}),t.jsx("tbody",{children:n.data.map((a,d)=>t.jsxs("tr",{className:"border-b border-stroke dark:border-strokedark",children:[t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white pl-10",children:a.hari}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:a.tanggal}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white pl-10",children:a.user?a.user.name:"N/A"}),r&&r.length>0&&r.map((l,x)=>{const i=a.pakets&&a.pakets[l.id]?Number(a.pakets[l.id]):0;return t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:i.toLocaleString()},x)}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(a.totalbiaya).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(a.daftar).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(a.modul).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(a.kaos).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(a.kas).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(a.lainlain).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm text-black dark:text-white",children:Number(a.totalpemasukan).toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-center",children:t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx(o,{href:`/admin/laporan/private/${a.id}/edit`,children:t.jsx(_,{className:"text-yellow-500 hover:text-yellow-700 cursor-pointer"})}),t.jsx(o,{href:`/admin/laporan/private/${a.id}`,method:"delete",as:"button",data:{id:a.id},onClick:l=>{confirm("Are you sure you want to delete this user?")||l.preventDefault()},children:t.jsx($,{className:"text-red-500 hover:text-red-700 cursor-pointer"})})]})})]},d))}),t.jsx("tfoot",{children:t.jsxs("tr",{className:"bg-gray-2 dark:bg-meta-4 font-semibold",children:[t.jsx("td",{colSpan:"3",className:"py-4 px-4 text-left text-sm font-medium text-black dark:text-white pl-10",children:"Total"}),r&&r.length>0&&r.map((a,d)=>t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:j(a.id).toLocaleString()},d)),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:c("totalbiaya").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:c("daftar").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:c("modul").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:c("kaos").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:c("kas").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:c("lainlain").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-sm font-bold text-black dark:text-white",children:c("totalpemasukan").toLocaleString()}),t.jsx("td",{className:"py-4 px-4 text-center text-sm font-medium text-black dark:text-white"})]})})]}),t.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[t.jsx("button",{onClick:()=>p(f),className:"py-2 px-4 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Sebelumnya"}),t.jsx("button",{onClick:()=>p(y),className:"py-2 px-4 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Selanjutnya"})]})]})]})})};export{M as default};
