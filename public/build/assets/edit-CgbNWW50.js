import{q as j,W as N,r as d,j as t}from"./app-Pk8tfygK.js";import{D as y}from"./DefaultLayout-B06gRY9n.js";import"./index-BPTtt6RU.js";const S=()=>{const{laporanprivate:s,paketPrivates:r}=j().props,u=()=>{const a={};return s.pakets?s.pakets:(r&&r.length>0&&r.forEach(e=>{e.nama_paket==="Paket 30K"&&(a[e.id]=s.biaya_30||0),e.nama_paket==="Paket 35K"&&(a[e.id]=s.biaya_35||0),e.nama_paket==="Paket 40K"&&(a[e.id]=s.biaya_40||0),e.nama_paket==="Paket 45K"&&(a[e.id]=s.biaya_45||0)}),a)},{data:l,setData:i,put:m,errors:P}=N({hari:s.hari,tanggal:s.tanggal,pakets:u(),daftar:s.daftar,modul:s.modul,kaos:s.kaos,kas:s.kas,lainlain:s.lainlain}),[w,p]=d.useState(0),[_,h]=d.useState(0);d.useEffect(()=>{let a=0;r&&r.length>0&&r.forEach(n=>{const o=parseInt(l.pakets[n.id])||0;a+=o*n.harga});const e=a+(parseInt(l.daftar)||0)+(parseInt(l.modul)||0)+(parseInt(l.kaos)||0)+(parseInt(l.kas)||0)+(parseInt(l.lainlain)||0);p(a),h(e)},[l,r]);const b=a=>{a.preventDefault();const e={};r&&r.length>0&&r.forEach(o=>{e[o.id]=parseInt(l.pakets[o.id])||0});const n={...l,pakets:e};m(`/admin/laporan/private/${s.id}`,{data:n})},g=(a,e)=>{const n=parseInt(e)||0;i(a,n)},c=(a,e)=>{i("pakets",{...l.pakets,[a]:e})},x=a=>{a.target.value==="0"&&(a.target.value="")},f=(a,e)=>{(a.target.value===""||a.target.value===null||a.target.value===void 0)&&i(e,0)},k=a=>{a.target.value==="0"&&(a.target.value="")},v=(a,e)=>{(a.target.value===""||a.target.value===null||a.target.value===void 0)&&c(e,0)};return t.jsx(y,{children:t.jsx("div",{className:"flex flex-col gap-9",children:t.jsxs("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[t.jsx("div",{className:"border-b border-stroke px-6.5 py-4 dark:border-strokedark",children:t.jsx("h3",{className:"font-medium text-black dark:text-white",children:"Edit Laporan Pemasukan Private"})}),t.jsx("form",{onSubmit:b,children:t.jsxs("div",{className:"p-6.5",children:[t.jsxs("div",{className:"mb-4.5 flex flex-col gap-6 xl:flex-row",children:[t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Hari"}),t.jsx("select",{className:"select select-bordered w-full",value:l.hari,onChange:a=>i("hari",a.target.value),children:["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"].map(a=>t.jsx("option",{value:a,children:a},a))})]}),t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Tanggal"}),t.jsx("input",{type:"date",className:"w-full rounded border px-3 py-2",value:l.tanggal,onChange:a=>i("tanggal",a.target.value)})]})]}),t.jsxs("div",{className:"mb-4.5",children:[t.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Paket"}),r&&r.map(a=>t.jsxs("div",{className:"mb-3",children:[t.jsxs("label",{className:"block text-sm text-black",children:[a.nama_paket," (Rp ",a.harga.toLocaleString(),")"]}),t.jsx("input",{type:"number",min:"0",className:"w-full rounded border px-3 py-2",value:l.pakets[a.id]||0,onChange:e=>c(a.id,e.target.value),onFocus:k,onBlur:e=>v(e,a.id)})]},a.id))]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:["daftar","modul","kaos","kas","lainlain"].map(a=>t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 capitalize",children:a}),t.jsx("input",{type:"number",value:l[a],onChange:e=>g(a,e.target.value),onFocus:x,onBlur:e=>f(e,a),className:"w-full rounded border px-3 py-2"})]},a))}),t.jsx("button",{type:"submit",className:"mt-5 flex w-full justify-center rounded bg-primary p-3 font-medium text-gray hover:bg-opacity-90",children:"Update"})]})})]})})})};export{S as default};
