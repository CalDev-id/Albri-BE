import{W as f,r as j,j as e,a as y,y as N}from"./app-BqKozNyH.js";import{D as v}from"./DefaultLayout-iKYsuz7g.js";import{i as w,h as _,o as D}from"./index-DjpOq2Q6.js";import{T as S}from"./TextEditor-CaoVN13n.js";import"./index-BHF4FRS3.js";const $=({newsEvent:r})=>{const{data:a,setData:l,put:u,processing:c,errors:d}=f({title:r.title||"",slug:r.slug||"",excerpt:r.excerpt||"",content:r.content||"",featured_image:null,status:r.status||"draft",published_at:r.published_at?r.published_at.substring(0,16):"",meta_data:r.meta_data||{meta_title:"",meta_description:"",tags:""}}),[o,x]=j.useState(!1),m=(t,i=null)=>{if(t.preventDefault(),i){const s=new FormData;s.append("title",a.title||""),s.append("slug",a.slug||""),s.append("excerpt",a.excerpt||""),s.append("content",a.content||""),s.append("status",i),s.append("published_at",a.published_at||""),a.featured_image&&s.append("featured_image",a.featured_image),a.meta_data&&Object.keys(a.meta_data).forEach(n=>{s.append(`meta_data[${n}]`,a.meta_data[n]||"")}),N.post(`/admin/news-events/${r.id}?_method=put`,s,{forceFormData:!0,preserveScroll:!0,onError:n=>{}});return}u(`/admin/news-events/${r.id}`,{forceFormData:!0})},b=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),p=t=>{const i=t.target.value;l({...a,title:i,slug:b(i)})},g=t=>{const i=t.target.value,s={...a,status:i};if(i==="published"&&!a.published_at){const n=new Date,k=new Date(n.getTime()-n.getTimezoneOffset()*6e4).toISOString().slice(0,16);s.published_at=k}l(s)},h=t=>{const i=t.target.files[0];l("featured_image",i)};return e.jsx(v,{children:e.jsxs("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsxs("div",{className:"border-b border-stroke py-4 px-6.5 dark:border-strokedark flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{href:"/admin/news-events",children:e.jsx(w,{className:"text-gray-500 hover:text-gray-700 cursor-pointer"})}),e.jsx("h3",{className:"font-semibold text-black dark:text-white",children:"Edit Postingan"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{type:"button",onClick:()=>x(!o),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 flex items-center gap-2",children:[e.jsx(_,{size:14}),o?"Edit":"Preview"]})})]}),o?e.jsx("div",{className:"p-6.5",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-black dark:text-white mb-4",children:a.title||"Judul Postingan"}),a.excerpt&&e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-4",children:a.excerpt}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Status: ",e.jsx("span",{className:"font-medium",children:a.status}),a.published_at&&e.jsxs("span",{className:"ml-4",children:["Publish: ",new Date(a.published_at).toLocaleDateString("id-ID")]})]})]}),r.featured_image&&e.jsx("div",{className:"mb-6",children:e.jsx("img",{src:`/storage/${r.featured_image}`,alt:a.title,className:"w-full h-64 object-cover rounded"})}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{className:"text-black dark:text-white leading-relaxed",dangerouslySetInnerHTML:{__html:a.content||"Konten postingan akan ditampilkan di sini..."}})})]})}):e.jsx("form",{onSubmit:m,children:e.jsx("div",{className:"p-6.5",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Judul Postingan"}),e.jsx("input",{type:"text",placeholder:"Masukkan judul postingan...",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:a.title,onChange:p}),d.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Kosongkan jika tidak ingin mengubah judul"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Slug URL"}),e.jsx("input",{type:"text",placeholder:"slug-url-berita",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:a.slug,onChange:t=>l("slug",t.target.value)}),d.slug&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Ringkasan"}),e.jsx("textarea",{rows:3,placeholder:"Ringkasan singkat postingan...",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:a.excerpt,onChange:t=>l("excerpt",t.target.value)}),d.excerpt&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.excerpt})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Konten"}),e.jsx(S,{value:a.content,onChange:t=>l("content",t),placeholder:"Tulis konten postingan di sini..."}),d.content&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.content}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gunakan toolbar di atas untuk formatting text, menambah gambar, link, dan lainnya. Kosongkan jika tidak ingin mengubah konten."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-sm border border-stroke bg-white p-4 shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsx("h4",{className:"mb-4 text-xl font-semibold text-black dark:text-white",children:"Pengaturan Publish"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Status"}),e.jsxs("select",{className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:a.status,onChange:g,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2.5 block text-black dark:text-white font-medium",children:"Tanggal Publish"}),e.jsx("input",{type:"datetime-local",className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:a.published_at,onChange:t=>l("published_at",t.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"submit",disabled:c,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 flex items-center gap-2 flex-1",children:[e.jsx(D,{size:14}),"Simpan Draft"]}),e.jsx("button",{type:"button",onClick:t=>m(t,"published"),disabled:c,className:"bg-primary text-white px-4 py-2 rounded hover:bg-opacity-90 flex items-center gap-2 flex-1",children:"Publish"})]})]})]}),e.jsxs("div",{className:"rounded-sm border border-stroke bg-white p-4 shadow-default dark:border-strokedark dark:bg-boxdark",children:[e.jsx("h4",{className:"mb-4 text-xl font-semibold text-black dark:text-white",children:"Gambar Utama"}),r.featured_image&&e.jsxs("div",{className:"mb-4",children:[e.jsx("img",{src:`/storage/${r.featured_image}`,alt:"Current featured image",className:"w-full h-32 object-cover rounded"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gambar saat ini"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"w-full rounded border-[1.5px] border-stroke bg-transparent py-3 px-5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("strong",{children:"Pilih gambar baru untuk mengubah"}),", atau kosongkan jika tidak ingin mengubah gambar. Anda dapat mengubah hanya gambar tanpa perlu mengubah field lain."]}),d.featured_image&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.featured_image})]})]})]})})})]})})};export{$ as default};
